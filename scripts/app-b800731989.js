(function(){angular.module("homemademessClient",["ngAria","ngResource","ui.router","ngMaterial","ngTagsInput","hmTouchEvents","ngLodash"]).filter("taglink",function(){return function(e){return e.replace(/\s/g,"_")}})}).call(this),function(){"use strict";angular.module("homemademessClient").controller("TaggedCtrl",["$scope","$stateParams","$http","apiUrl",function(e,t,i,a){var n;return e.tag=t.tag.replace(/_/g," "),n=e.view.filter.tag.tags,n.length>1&&angular.forEach(n,function(t,i){return t.text!==e.tag?e.view.filter.tag.tags.splice(i,1):void 0}),0===n.length?i.get(a+"/tags?text="+t.tag).then(function(t){return e.view.filter.tag.tags=t.data}):void 0}])}.call(this),function(){"use strict";angular.module("homemademessClient").directive("slideshow",function(){var e,t;return t=["$scope","$mdDialog","$stateParams","$state","$document",function(e,t,i,a,n){var s;return e.open=!1,e.transition=!1,s=function(){return null!=a.params.slide&&e.open&&!e.transition?Number(a.params.slide):!1},e.showClose=function(){return s()!==!1?a.go(a.$current.parent):void 0},e.showLeft=function(){var e;return e=s(),e!==!1&&e-1>-1?a.go(a.current,{slide:e-1}):void 0},e.showRight=function(){var t;return t=s(),t!==!1&&e.view.images.length>t+1?a.go(a.current,{slide:t+1}):void 0},e.showUp=function(){return s()!==!1?a.go(a.current,{slide:0}):void 0},e.showDown=function(){return s()!==!1?a.go(a.current,{slide:e.view.images.length-1}):void 0},n.bind("keyup",function(t){switch(t.which){case 39:return e.showRight();case 37:return e.showLeft();case 38:return e.showUp();case 40:return e.showDown()}}),e.$on("slidesLayout",function(t){return i.slide?e.updateShowState(i.slide):void 0}),e.$on("$stateChangeStart",function(i,a,n,s,r){return e.open||null==n.slide||e.updateShowState(n.slide),!n.slide&&e.open?t.hide():void 0}),e.updateShowState=function(t){return!e.open&&e.view.images[t]?(e.open=!0,e.showSlide(t)):void 0},e.showSlide=function(i){return i=Number(i),t.show({clickOutsideToClose:!0,locals:{i:i,img:e.view.images[i].derivative[2].uri,label:e.view.images[i].filename},scope:e,preserveScope:!0,onRemoving:function(){return e.open=!1},template:'<md-dialog   aria-label="{{label}}"  class="slide"  ng-class="{loading: transition}"  hm-pinchin="showClose"  hm-swipeleft="showRight"  hm-swiperight="showLeft"  hm-swipeup="showDown"  hm-swipedown="showUp">  <md-dialog-content>     <img ng-src="{{img}}" class="img-responsive" ng-class="imgclasses" />     <div class="loading-spinner"></div>  </md-dialog-content></md-dialog>',controller:["$scope","$mdDialog","$stateParams","i","img","label",function(e,t,i,a,n,s){return e.i=a,e.img=n,e.label=s,e.imgclasses={},e.$on("$stateChangeStart",function(t,i,a,n,s){return null!=a.slide?e.update(a.slide):void 0}),e.update=function(t){var i,a;return e.transition=!0,a=e.view.images[t].derivative[2].uri,i=new Image,i.onload=function(){return e.imgclasses=e.toggleClass(Number(t)),e.i=Number(t),e.img=a,e.label=e.view.images[t].filename,e.transition=!1,e.$digest()},i.src=a},e.toggleClass=function(t){var i;switch(i={up:!1,down:!1,left:!1,leftagain:!1,right:!1,rightagain:!1},!1){case!(t<e.i&&e.i-t>1&&0===t):i.up=!0;break;case!(t>e.i&&t-e.i>1&&t===e.view.images.length-1):i.down=!0;break;case!(t<e.i&&e.i-t===1):e.imgclasses.left?i.leftagain=!0:i.left=!0;break;case!(t>e.i&&t-e.i===1):e.imgclasses.right?i.rightagain=!0:i.right=!0}return i}}]}).then(null,function(){return a.go(a.$current.parent)})}}],e={restrict:"E",controller:t}})}.call(this),function(){"use strict";angular.module("homemademessClient").directive("openSlide",function(){return{restrict:"A",link:function(e,t,i){return t.bind("click",function(e,t){return function(a){var n;n=t(function(){e.go(i.state,i.params)}),a.preventDefault(),a.preventDefault=function(){},ignorePreventDefaultCount--<=0&&t.cancel(n)}})}}}).directive("slides",function(){var e,t;return t=["$scope","$state","$rootScope","$mdMedia",function(e,t,i,a){return e.cols={sm:24,md:36,lg:48,gt:60},e.derivative=0,e.curSt=t.current.name+".slide",e.getParams=function(e){return{slide:e}},e.getHref=function(e){return t.href(".slide",{slide:e})},e.broadcastLayout=function(){return i.$broadcast("slidesLayout")},e.aspect=function(t,i){var n,s,r,o;return n=Math.round(t.height/t.width*100)/100,r=function(){switch(!1){case!(.4>n):switch(!1){case!a("sm"):return e.derivative=0,e.cols.sm;case!a("md"):return e.derivative=0,e.cols.md;case!a("lg"):return e.derivative=1,e.cols.lg;case!a("gt-lg"):return e.derivative=1,e.cols.gt}break;default:return e.derivative=0,12}}(),o=Math.round(r*n),s=[r,o],s[i]}}],e={restrict:"E",controller:t,templateUrl:"app/components/slides/slides.html"}})}.call(this),function(){"use strict";angular.module("homemademessClient").directive("searchbar",function(){var e,t;return e=["$scope","$resource","apiUrl",function(e,t,i){var a;return a=t(i+"/auto"),e.findTags=function(e){return a.query({q:e}).$promise}}],t={restrict:"E",templateUrl:"app/components/searchbar/searchbar.html",controller:e}})}.call(this),function(){"use strict";angular.module("homemademessClient").controller("MainCtrl",["$scope","$state","slides","$resource","lodash","apiUrl",function(e,t,i,a,n,s){var r,o;return e.view=i,e.view.filter={tag:{tags:[],logic:["and","or","not"],operator:"and"},date:{max:0,min:0}},o=function(e){return n.uniq(n.map(e,"_id"))},r=a(s+"/images"),e.$watchCollection("view.filter.tag.tags",function(t){return r.get({tags:o(t,{logic:e.view.filter.tag.operator})},function(t){return e.view.images=t.images,e.view.tags=t.tags})}),e.$on("$viewContentLoaded",function(i){return e.$broadcast("viewInit",t.params)})}])}.call(this),function(){angular.module("homemademessClient").run(["$log",function(e){"ngInject";return e.debug("runBlock end")}])}.call(this),function(){angular.module("homemademessClient").config(["$stateProvider","$urlRouterProvider",function(e,t){"ngInject";return e.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl",resolve:{slides:["$http","apiUrl",function(e,t){return e.get(t+"/images")}]}}).state("home.slide",{url:"slide/:slide"}).state("home.tagged",{url:"tagged/:tag/",templateUrl:"app/main/tagged/tagged.html",controller:"TaggedCtrl"}).state("home.tagged.slide",{url:"slide/:slide"}),t.otherwise("/")}])}.call(this),function(){angular.module("homemademessClient").constant("apiUrl","http://api.homemademess.com")}.call(this),function(){angular.module("homemademessClient").config(["$logProvider",function(e){"ngInject";return e.debugEnabled(!0)}])}.call(this),angular.module("homemademessClient").run(["$templateCache",function(e){e.put("app/main/main.html",'<div class="container main"><div class="ui-view"><searchbar></searchbar></div><slides></slides><slideshow></slideshow><footer class="footer"><div class="container"><p>homemademess.com | <a href="https://github.com/markisatacomputer/homemademess">github</a></p></div></footer></div>'),e.put("app/main/main.slideshow.html",'<slideshow slides="view.images"></slideshow>'),e.put("app/components/searchbar/searchbar.html",'<div class="searchy"><div id="search"><tags-input ng-model="view.filter.tag.tags" template="tag-temp.html" title="Tags" placeholder="search by tag" replace-spaces-with-dashes="false"><auto-complete source="findTags($query)" min-length="1" template="result-temp.html"></auto-complete></tags-input><script type="text/ng-template" id="tag-temp.html"><span><a ng-bind="$getDisplayText()" ui-sref="home.tagged({ tag : \'{{ data[\'text\'] | taglink }}\' })"></a></span><a ng-click="$removeTag()" ng-bind="::$$removeTagSymbol" class="remove-button"></a></script><script type="text/ng-template" id="result-temp.html"><span ng-bind-html="$highlight($getDisplayText())" class="text">{{data.text}}</span><span class="number">({{data._sort.size}})</span></script></div></div>'),e.put("app/components/slides/slides.html",'<div class="slides"><md-grid-list md-cols-sm="{{cols.sm}}" md-cols-md="{{cols.md}}" md-cols-lg="{{cols.lg}}" md-cols-gt-lg="{{cols.gt}}" md-row-height="1:1" md-gutter="5px" md-on-layout="broadcastLayout()"><md-grid-tile ng-repeat="(n, image) in view.images" md-colspan="{{aspect(image,0)}}" md-rowspan="{{aspect(image,1)}}"><div class="img-container"><a ng-href="{{getHref(n)}}" open-slide="" state="{{curSt}}" params="{{getParams(n)}}"><img ng-src="{{image.derivative[derivative].uri}}" class="img-responsive"></a></div></md-grid-tile></md-grid-list></div>'),e.put("app/main/tagged/tagged.html",'<h1 class="tag">{{tag}}</h1>')}]);
//# sourceMappingURL=../maps/scripts/app-b800731989.js.map