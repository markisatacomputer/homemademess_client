(function(){angular.module("homemademessClient",["ngCookies","ngSanitize","ngAria","ngResource","ui.router","akoenig.deckgrid","ngMaterial","ngDropzone","ngTagsInput","ngLodash"]).filter("taglink",function(){return function(e){return e.replace(/\s/g,"_")}})}).call(this),function(){"use strict";angular.module("homemademessClient").directive("searchbar",function(){var e,t;return e=["$scope","$resource","lodash","apiUrl",function(e,t,a,i){var n,s;return e.mapTags=function(e){return a.uniq(a.map(e,"_id"))},s=t(i+"/images"),e.redoSearch=function(){return s.get({tags:e.mapTags(e.tags)},function(t){return e.view.images=t.images})},n=t(i+"/auto"),e.findTags=function(e){return n.query({q:e}).$promise}}],t={restrict:"E",templateUrl:"app/components/searchbar/searchbar.html",controller:e}})}.call(this),function(){"use strict";angular.module("homemademessClient").controller("TaggedCtrl",["$scope","$stateParams","slides",function(e,t,a){return e.$parent.view=a.data,e.tag=t.tag.replace(/_/g," ")}])}.call(this),function(){"use strict";angular.module("homemademessClient").directive("slideshow",function(){var e,t;return t=["$scope","$mdDialog","$stateParams","$state","$document",function(e,t,a,i,n){return e.open=!1,e.transition=!1,n.bind("keyup",function(t){var a;if(null!=i.params.slide&&e.open&&!e.transition)switch(a=Number(i.params.slide),t.which){case 39:if(e.view.images.length>a+1)return i.go(i.current,{slide:a+1});break;case 37:if(a-1>-1)return i.go(i.current,{slide:a-1});break;case 38:return i.go(i.current,{slide:0});case 40:return i.go(i.current,{slide:e.view.images.length-1})}}),e.$on("slidesLayout",function(t){return a.slide?e.updateShowState(a.slide):void 0}),e.$on("$stateChangeStart",function(a,i,n,s,r){return e.open||null==n.slide||e.updateShowState(n.slide),!n.slide&&e.open?t.hide():void 0}),e.updateShowState=function(t){return!e.open&&e.view.images[t]?(e.open=!0,e.showSlide(t)):void 0},e.showSlide=function(a){return a=Number(a),t.show({clickOutsideToClose:!0,locals:{i:a,img:e.view.images[a].derivative[2].uri,label:e.view.images[a].filename},scope:e,preserveScope:!0,onRemoving:function(){return e.open=!1},template:'<md-dialog aria-label="{{label}}" class="slide" ng-class="{loading: transition}">  <md-dialog-content>     <img ng-src="{{img}}" class="img-responsive" ng-class="imgclasses" />     <div class="loading-spinner"></div>  </md-dialog-content></md-dialog>',controller:["$scope","$mdDialog","$stateParams","i","img","label",function(e,t,a,i,n,s){return e.i=i,e.img=n,e.label=s,e.imgclasses={},e.$on("$stateChangeStart",function(t,a,i,n,s){return null!=i.slide?e.update(i.slide):void 0}),e.update=function(t){var a,i;return e.transition=!0,i=e.view.images[t].derivative[2].uri,a=new Image,a.onload=function(){return e.imgclasses=e.toggleClass(Number(t)),e.i=Number(t),e.img=i,e.label=e.view.images[t].filename,e.transition=!1,e.$digest()},a.src=i},e.toggleClass=function(t){var a;switch(a={up:!1,down:!1,left:!1,leftagain:!1,right:!1,rightagain:!1},!1){case!(t<e.i&&e.i-t>1&&0===t):a.up=!0;break;case!(t>e.i&&t-e.i>1&&t===e.view.images.length-1):a.down=!0;break;case!(t<e.i&&e.i-t===1):e.imgclasses.left?a.leftagain=!0:a.left=!0;break;case!(t>e.i&&t-e.i===1):e.imgclasses.right?a.rightagain=!0:a.right=!0}return a}}]}).then(null,function(){return i.go(i.$current.parent)})}}],e={restrict:"E",controller:t}})}.call(this),function(){"use strict";angular.module("homemademessClient").directive("openSlide",function(){return{restrict:"A",link:function(e,t,a){return t.bind("click",function(e,t){return function(i){var n;n=t(function(){e.go(a.state,a.params)}),i.preventDefault(),i.preventDefault=function(){},ignorePreventDefaultCount--<=0&&t.cancel(n)}})}}}).directive("slides",function(){var e,t;return t=["$scope","$state","$rootScope","$mdMedia",function(e,t,a,i){return e.cols={sm:24,md:36,lg:48,gt:60},e.derivative=0,e.curSt=t.current.name+".slide",e.getParams=function(e){return{slide:e}},e.getHref=function(e){return t.href(".slide",{slide:e})},e.broadcastLayout=function(){return a.$broadcast("slidesLayout")},e.aspect=function(t,a){var n,s,r,l;return n=Math.round(t.height/t.width*100)/100,r=function(){switch(!1){case!(.4>n):switch(!1){case!i("sm"):return e.derivative=0,e.cols.sm;case!i("md"):return e.derivative=0,e.cols.md;case!i("lg"):return e.derivative=1,e.cols.lg;case!i("gt-lg"):return e.derivative=1,e.cols.gt}break;default:return e.derivative=0,12}}(),l=Math.round(r*n),s=[r,l],s[a]}}],e={restrict:"E",controller:t,templateUrl:"app/components/slides/slides.html"}})}.call(this),function(){"use strict";angular.module("homemademessClient").controller("MainCtrl",["$scope","$state","slides",function(e,t,a){return e.view=a.data,e.tags=[],e.$on("$viewContentLoaded",function(a){return e.$broadcast("viewInit",t.params)})}])}.call(this),function(){angular.module("homemademessClient").run(["$log",function(e){"ngInject";return e.debug("runBlock end")}])}.call(this),function(){angular.module("homemademessClient").config(["$stateProvider","$urlRouterProvider",function(e,t){"ngInject";return e.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl",resolve:{slides:["$http","apiUrl",function(e,t){return e.get(t+"/images")}]}}).state("home.slide",{url:"slide/:slide"}).state("home.tagged",{url:"tagged/:tag/",templateUrl:"app/main/tagged/tagged.html",controller:"TaggedCtrl",resolve:{slides:["$http","apiUrl","$stateParams",function(e,t,a){return e.get(t+"/tagged/"+a.tag)}]}}).state("home.tagged.slide",{url:"slide/:slide"}),t.otherwise("/")}])}.call(this),function(){angular.module("homemademessClient").constant("apiUrl","http://api.homemademess.com")}.call(this),function(){angular.module("homemademessClient").config(["$logProvider",function(e){"ngInject";return e.debugEnabled(!0)}])}.call(this),angular.module("homemademessClient").run(["$templateCache",function(e){e.put("app/main/main.html",'<div class="container main"><div class="ui-view"><searchbar></searchbar></div><slides></slides><slideshow></slideshow><footer class="footer"><div class="container"><p>homemademess.com | <a href="https://github.com/markisatacomputer/homemademess">github</a></p></div></footer></div>'),e.put("app/main/main.slideshow.html",'<slideshow slides="view.images"></slideshow>'),e.put("app/components/searchbar/searchbar.html",'<div class="searchy"><div id="search"><tags-input ng-model="tags" template="tag-temp.html" title="Tags" placeholder="search by tag" replace-spaces-with-dashes="false" on-tag-added="redoSearch()" on-tag-removed="redoSearch()"><auto-complete source="findTags($query)" min-length="1" template="result-temp.html"></auto-complete></tags-input><script type="text/ng-template" id="tag-temp.html"><span><a ng-bind="$getDisplayText()" ui-sref="home.tagged({ tag : \'{{ data[\'text\'] | taglink }}\' })"></a></span><a ng-click="$removeTag()" ng-bind="::$$removeTagSymbol" class="remove-button"></a></script><script type="text/ng-template" id="result-temp.html"><span ng-bind-html="$highlight($getDisplayText())" class="text">{{data.text}}</span><span class="number">({{data._sort.size}})</span></script></div></div>'),e.put("app/components/slides/slides.html",'<div class="slides"><md-grid-list md-cols-sm="{{cols.sm}}" md-cols-md="{{cols.md}}" md-cols-lg="{{cols.lg}}" md-cols-gt-lg="{{cols.gt}}" md-row-height="1:1" md-gutter="5px" md-on-layout="broadcastLayout()"><md-grid-tile ng-repeat="(n, image) in view.images" md-colspan="{{aspect(image,0)}}" md-rowspan="{{aspect(image,1)}}"><div class="img-container"><a ng-href="{{getHref(n)}}" open-slide="" state="{{curSt}}" params="{{getParams(n)}}"><img ng-src="{{image.derivative[derivative].uri}}" class="img-responsive"></a></div></md-grid-tile></md-grid-list></div>'),e.put("app/main/tagged/tagged.html",'<h1 class="tag">{{tag}}</h1>')}]);
//# sourceMappingURL=../maps/scripts/app-c649134681.js.map