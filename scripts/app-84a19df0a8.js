(function(){angular.module("homemademessClient",["ngAria","ngResource","ui.router","ngMaterial","ngTagsInput","hmTouchEvents","ngLodash"]).filter("taglink",function(){return function(e){return e.replace(/\s/g,"_")}})}).call(this),function(){"use strict";angular.module("homemademessClient").controller("TaggedCtrl",["$scope","$stateParams","slides",function(e,t,n){return e.$parent.view=n.data,e.tag=t.tag.replace(/_/g," ")}])}.call(this),function(){"use strict";angular.module("homemademessClient").directive("slideshow",function(){var e,t;return t=["$scope","$mdDialog","$stateParams","$state","$document",function(e,t,n,a,i){var s;return e.open=!1,e.transition=!1,s=function(){return null!=a.params.slide&&e.open&&!e.transition?Number(a.params.slide):!1},e.showClose=function(){return s()!==!1?a.go(a.$current.parent):void 0},e.showLeft=function(){var e;return e=s(),e!==!1&&e-1>-1?a.go(a.current,{slide:e-1}):void 0},e.showRight=function(){var t;return t=s(),t!==!1&&e.view.images.length>t+1?a.go(a.current,{slide:t+1}):void 0},e.showUp=function(){return s()!==!1?a.go(a.current,{slide:0}):void 0},e.showDown=function(){return s()!==!1?a.go(a.current,{slide:e.view.images.length-1}):void 0},i.bind("keyup",function(t){switch(t.which){case 39:return e.showRight();case 37:return e.showLeft();case 38:return e.showUp();case 40:return e.showDown()}}),e.$on("slidesLayout",function(t){return n.slide?e.updateShowState(n.slide):void 0}),e.$on("$stateChangeStart",function(n,a,i,s,r){return e.open||null==i.slide||e.updateShowState(i.slide),!i.slide&&e.open?t.hide():void 0}),e.updateShowState=function(t){return!e.open&&e.view.images[t]?(e.open=!0,e.showSlide(t)):void 0},e.showSlide=function(n){return n=Number(n),t.show({clickOutsideToClose:!0,locals:{i:n,img:e.view.images[n].derivative[2].uri,label:e.view.images[n].filename},scope:e,preserveScope:!0,onRemoving:function(){return e.open=!1},template:'<md-dialog   aria-label="{{label}}"  class="slide"  ng-class="{loading: transition}"  hm-pinchin="showClose"  hm-swipeleft="showRight"  hm-swiperight="showLeft"  hm-swipeup="showDown"  hm-swipedown="showUp">  <md-dialog-content>     <img ng-src="{{img}}" class="img-responsive" ng-class="imgclasses" />     <div class="loading-spinner"></div>  </md-dialog-content></md-dialog>',controller:["$scope","$mdDialog","$stateParams","i","img","label",function(e,t,n,a,i,s){return e.i=a,e.img=i,e.label=s,e.imgclasses={},e.$on("$stateChangeStart",function(t,n,a,i,s){return null!=a.slide?e.update(a.slide):void 0}),e.update=function(t){var n,a;return e.transition=!0,a=e.view.images[t].derivative[2].uri,n=new Image,n.onload=function(){return e.imgclasses=e.toggleClass(Number(t)),e.i=Number(t),e.img=a,e.label=e.view.images[t].filename,e.transition=!1,e.$digest()},n.src=a},e.toggleClass=function(t){var n;switch(n={up:!1,down:!1,left:!1,leftagain:!1,right:!1,rightagain:!1},!1){case!(t<e.i&&e.i-t>1&&0===t):n.up=!0;break;case!(t>e.i&&t-e.i>1&&t===e.view.images.length-1):n.down=!0;break;case!(t<e.i&&e.i-t===1):e.imgclasses.left?n.leftagain=!0:n.left=!0;break;case!(t>e.i&&t-e.i===1):e.imgclasses.right?n.rightagain=!0:n.right=!0}return n}}]}).then(null,function(){return a.go(a.$current.parent)})}}],e={restrict:"E",controller:t}})}.call(this),function(){"use strict";angular.module("homemademessClient").directive("openSlide",function(){return{restrict:"A",link:function(e,t,n){return t.bind("click",function(e,t){return function(a){var i;i=t(function(){e.go(n.state,n.params)}),a.preventDefault(),a.preventDefault=function(){},ignorePreventDefaultCount--<=0&&t.cancel(i)}})}}}).directive("slides",function(){var e,t;return t=["$scope","$state","$rootScope",function(e,t,n){return e.curSt=t.current.name+".slide",e.getParams=function(e){return{slide:e}},e.getHref=function(e){return t.href(".slide",{slide:e})},e.broadcastLayout=function(){return n.$broadcast("slidesLayout")},e.aspect=function(e,t){var n,a,i,s;return n=Math.round(e.height/e.width*100)/100,1>n?(i=function(){switch(!1){case!(.6>n):return 8;case!(.4>n):return 6;case!(.25>n):return 4;default:return 12}}(),s=Math.round(i*n)):(s=function(){switch(!1){case!(n>1.34):return 16;case!(n>2):return 24;case!(n>3):return 36;default:return 12}}(),i=2*Math.round(Math.round(s*e.width/e.height)/2)),a=[i,s],a[t]}}],e={restrict:"E",controller:t,templateUrl:"app/components/slides/slides.html"}})}.call(this),function(){"use strict";angular.module("homemademessClient").directive("searchbar",function(){var e,t;return e=["$scope","$resource","lodash","apiUrl",function(e,t,n,a){var i,s;return e.mapTags=function(e){return n.uniq(n.map(e,"_id"))},s=t(a+"/images"),e.redoSearch=function(){return s.get({tags:e.mapTags(e.tags)},function(t){return e.view.images=t.images})},i=t(a+"/auto"),e.findTags=function(e){return i.query({q:e}).$promise}}],t={restrict:"E",templateUrl:"app/components/searchbar/searchbar.html",controller:e}})}.call(this),function(){"use strict";angular.module("homemademessClient").controller("MainCtrl",["$scope","$state","slides",function(e,t,n){return e.view=n.data,e.tags=[],e.$on("$viewContentLoaded",function(n){return e.$broadcast("viewInit",t.params)})}])}.call(this),function(){angular.module("homemademessClient").run(["$log",function(e){"ngInject";return e.debug("runBlock end")}])}.call(this),function(){angular.module("homemademessClient").config(["$stateProvider","$urlRouterProvider",function(e,t){"ngInject";return e.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl",resolve:{slides:["$http","apiUrl",function(e,t){return e.get(t+"/images")}]}}).state("home.slide",{url:"slide/:slide"}).state("home.tagged",{url:"tagged/:tag/",templateUrl:"app/main/tagged/tagged.html",controller:"TaggedCtrl",resolve:{slides:["$http","apiUrl","$stateParams",function(e,t,n){return e.get(t+"/tagged/"+n.tag)}]}}).state("home.tagged.slide",{url:"slide/:slide"}),t.otherwise("/")}])}.call(this),function(){angular.module("homemademessClient").constant("apiUrl","http://api.homemademess.com")}.call(this),function(){angular.module("homemademessClient").config(["$logProvider",function(e){"ngInject";return e.debugEnabled(!0)}])}.call(this),angular.module("homemademessClient").run(["$templateCache",function(e){e.put("app/main/main.html",'<div class="container main"><div class="ui-view"><searchbar></searchbar></div><slides></slides><slideshow></slideshow><footer class="footer"><div class="container"><p>homemademess.com | <a href="https://github.com/markisatacomputer/homemademess">github</a></p></div></footer></div>'),e.put("app/main/main.slideshow.html",'<slideshow slides="view.images"></slideshow>'),e.put("app/components/searchbar/searchbar.html",'<div class="searchy"><div id="search"><tags-input ng-model="tags" template="tag-temp.html" title="Tags" placeholder="search by tag" replace-spaces-with-dashes="false" on-tag-added="redoSearch()" on-tag-removed="redoSearch()"><auto-complete source="findTags($query)" min-length="1" template="result-temp.html"></auto-complete></tags-input><script type="text/ng-template" id="tag-temp.html"><span><a ng-bind="$getDisplayText()" ui-sref="home.tagged({ tag : \'{{ data[\'text\'] | taglink }}\' })"></a></span><a ng-click="$removeTag()" ng-bind="::$$removeTagSymbol" class="remove-button"></a></script><script type="text/ng-template" id="result-temp.html"><span ng-bind-html="$highlight($getDisplayText())" class="text">{{data.text}}</span><span class="number">({{data._sort.size}})</span></script></div></div>'),e.put("app/components/slides/slides.html",'<div class="slides"><md-grid-list md-cols-sm="12" md-cols-md="24" md-cols-lg="48" md-cols-gt-lg="60" md-row-height="1:1" md-gutter="5px" md-on-layout="broadcastLayout()"><md-grid-tile ng-repeat="(n, image) in view.images" md-colspan="{{aspect(image,0)}}" md-rowspan="{{aspect(image,1)}}"><div class="img-container"><a ng-href="{{getHref(n)}}" open-slide="" state="{{curSt}}" params="{{getParams(n)}}"><img ng-src="{{image.derivative[0].uri}}" class="img-responsive"></a></div></md-grid-tile></md-grid-list></div>'),e.put("app/main/tagged/tagged.html",'<h1 class="tag">{{tag}}</h1>')}]);
//# sourceMappingURL=../maps/scripts/app-84a19df0a8.js.map