{"version":3,"sources":["/source/index.config.js"],"names":["angular","module","filter","input","replace","call","this","directive","SearchCtrl","$scope","$resource","lodash","$q","$location","apiUrl","Auto","Images","tags","isActive","route","path","mapTags","uniq","map","redoSearch","get","result","view","images","findTags","value","query","q","$promise","restrict","templateUrl","controller","$document","$rootScope","link","scope","element","attr","on","event","preventDefault","showSlide","Number","openSlide","bind","e","$broadcast","which","$on","n","i","slides","length","$digest","$http","$stateParams","$mdDialog","getURI","tag","containerClass","success","offset","aspect","img","a","columns","rows","Math","round","width","height","slide","locals","window","innerWidth","show","clickOutsideToClose","template","$watch","v","old","derivative","uri","run","$log","debug","config","$stateProvider","$urlRouterProvider","state","url","controllerAs","otherwise","constant","$logProvider","debugEnabled","$templateCache","put"],"mappings":"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","file":"scripts/app-8cf9958e72.js","sourcesContent":["(function() {\n  angular.module('homemademessClient', ['ngCookies', 'ngSanitize', 'ngAria', 'ngResource', 'ui.router', 'akoenig.deckgrid', 'ngMaterial', 'ngDropzone', 'ngTagsInput', 'ngLodash']).filter('taglink', function() {\n    return function(input) {\n      return input.replace(/\\s/g, '_');\n    };\n  });\n\n}).call(this);\n\n\n(function() {\n  'use strict';\n  angular.module('homemademessClient').directive('searchbar', function() {\n    var SearchCtrl, directive;\n    SearchCtrl = [\n      '$scope', '$resource', 'lodash', '$q', '$location', 'apiUrl', function($scope, $resource, lodash, $q, $location, apiUrl) {\n        var Auto, Images;\n        $scope.tags = [];\n        $scope.isActive = function(route) {\n          return route === $location.path();\n        };\n        $scope.mapTags = function(tags) {\n          return lodash.uniq(lodash.map(tags, '_id'));\n        };\n        Images = $resource(apiUrl + '/images');\n        $scope.redoSearch = function() {\n          return Images.get({\n            tags: $scope.mapTags($scope.tags)\n          }, function(result) {\n            return $scope.view.images = result.images;\n          });\n        };\n        Auto = $resource(apiUrl + '/auto');\n        return $scope.findTags = function(value) {\n          return Auto.query({\n            q: value\n          }).$promise;\n        };\n      }\n    ];\n    return directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/searchbar/searchbar.html',\n      controller: SearchCtrl\n    };\n  });\n\n}).call(this);\n\n\n(function() {\n  'use strict';\n  angular.module('homemademessClient').directive('openSlide', [\n    '$document', '$rootScope', function($document, $rootScope) {\n      var directive;\n      return directive = {\n        restrict: 'A',\n        link: function(scope, element, attr) {\n          return element.on('click', function(event) {\n            event.preventDefault();\n            return scope.showSlide(Number(attr.openSlide));\n          });\n        }\n      };\n    }\n  ]);\n\n}).call(this);\n\n\n(function() {\n  'use strict';\n  angular.module('homemademessClient').directive('keyboard', [\n    '$document', '$rootScope', function($document, $rootScope) {\n      var directive;\n      return directive = {\n        restrict: 'A',\n        link: function(scope, element, attr) {\n          return $document.bind('keyup', function(e) {\n            return $rootScope.$broadcast('keyup:' + e.which, e);\n          });\n        }\n      };\n    }\n  ]).directive('keyboardNext', [\n    function() {\n      var directive;\n      return directive = {\n        restrict: 'A',\n        scope: false,\n        link: function(scope, element, attr) {\n          return scope.$on('keyup:39', function(n, e) {\n            if (scope.i < scope.slides.length - 1) {\n              scope.i = scope.i + 1;\n              return scope.$digest();\n            }\n          });\n        }\n      };\n    }\n  ]).directive('keyboardPrev', [\n    function() {\n      var directive;\n      return directive = {\n        restrict: 'A',\n        scope: false,\n        link: function(scope, element, attr) {\n          return scope.$on('keyup:37', function(n, e) {\n            if (scope.i > 0) {\n              scope.i = scope.i - 1;\n              return scope.$digest();\n            }\n          });\n        }\n      };\n    }\n  ]).directive('keyboardStart', [\n    function() {\n      var directive;\n      return directive = {\n        restrict: 'A',\n        scope: false,\n        link: function(scope, element, attr) {\n          return scope.$on('keyup:38', function(n, e) {\n            if (scope.i !== 0) {\n              scope.i = 0;\n              return scope.$digest();\n            }\n          });\n        }\n      };\n    }\n  ]).directive('keyboardEnd', [\n    function() {\n      var directive;\n      return directive = {\n        restrict: 'A',\n        scope: false,\n        link: function(scope, element, attr) {\n          return scope.$on('keyup:40', function(n, e) {\n            if (scope.i !== scope.slides.length - 1) {\n              scope.i = scope.slides.length - 1;\n              return scope.$digest();\n            }\n          });\n        }\n      };\n    }\n  ]);\n\n}).call(this);\n\n\n(function() {\n  'use strict';\n  angular.module('homemademessClient').controller('MainCtrl', function($scope, $http, $stateParams, apiUrl, $mdDialog, $document) {\n    var getURI;\n    $scope.view = {};\n    $scope.i = 0;\n\n    /*$scope.$watch 'i', (v, old) ->\n      console.log 'i change', old, v\n      $scope.slide = $scope.view.images[v]\n     */\n    if ($stateParams.tag) {\n      getURI = apiUrl + '/tagged/' + $stateParams.tag;\n      $scope.containerClass = 'tagged';\n      $scope.tag = $stateParams.tag.replace(/_/g, ' ');\n    } else {\n      getURI = apiUrl + '/images';\n      $scope.containerClass = 'main';\n    }\n    $http.get(getURI).success(function(result) {\n      $scope.view.images = result.images;\n      $scope.view.tags = result.tags;\n      return $scope.view.offset = 0;\n    });\n    $scope.aspect = function(img, n) {\n      var a, aspect, columns, rows;\n      a = Math.round((img.width / img.height) * 100) / 100;\n      if (a < 1) {\n        columns = (function() {\n          switch (false) {\n            case !(a < 0.5):\n              return 8;\n            case !(a < 0.25):\n              return 6;\n            case !(a < 0.25):\n              return 4;\n            default:\n              return 12;\n          }\n        })();\n        rows = Math.round(columns * img.height / img.width);\n      } else {\n        rows = (function() {\n          switch (false) {\n            case !(a > 1.51):\n              return 12;\n            case !(a > 2):\n              return 16;\n            case !(a > 3):\n              return 24;\n            default:\n              return 8;\n          }\n        })();\n        columns = Math.round(rows * a);\n      }\n      aspect = [columns, rows];\n      return aspect[n];\n    };\n    return $scope.showSlide = function(slide) {\n      var locals;\n      if (window.innerWidth > 459) {\n        locals = {\n          i: Number(slide),\n          slides: $scope.view.images\n        };\n        return $mdDialog.show({\n          clickOutsideToClose: true,\n          locals: locals,\n          template: '<md-dialog aria-label=\"{{slide.filename}}\" class=\"slide\">' + '  <md-dialog-content keyboard-next keyboard-prev keyboard-start keyboard-end>' + '     <img ng-src=\"{{img}}\" class=\"img-responsive\" ng-style=\"{{stylez}}\" />' + '  </md-dialog-content>' + '</md-dialog>',\n          controller: function($scope, $mdDialog, i, slides) {\n            $scope.slides = slides;\n            $scope.i = i;\n            $scope.img;\n            return $scope.$watch('i', function(v, old) {\n              return $scope.img = $scope.slides[v].derivative[2].uri;\n            });\n          }\n        });\n      }\n    };\n  });\n\n}).call(this);\n\n\n(function() {\n  angular.module('homemademessClient').run(function($log) {\n    'ngInject';\n    return $log.debug('runBlock end');\n  });\n\n}).call(this);\n\n\n(function() {\n  angular.module('homemademessClient').config(function($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider.state('home', {\n      url: '/',\n      templateUrl: 'app/main/main.html',\n      controller: 'MainCtrl',\n      controllerAs: 'main'\n    }).state('tagged', {\n      url: '/tagged/:tag',\n      templateUrl: 'app/main/main.html',\n      controller: 'MainCtrl'\n    });\n    return $urlRouterProvider.otherwise('/');\n  });\n\n}).call(this);\n\n\n(function() {\n  angular.module('homemademessClient').constant('apiUrl', 'http://api.homemademess.com');\n\n}).call(this);\n\n\n(function() {\n  angular.module('homemademessClient').config(function($logProvider) {\n    'ngInject';\n    return $logProvider.debugEnabled(true);\n  });\n\n}).call(this);\n\n\nangular.module(\"homemademessClient\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/main/main.old.html\",\"<div layout=\\\"vertical\\\" layout-fill=\\\"\\\"><md-content><header><acme-navbar creation-date=\\\"main.creationDate\\\"></acme-navbar></header><section class=\\\"jumbotron\\\"><h1>\\'Allo, \\'Allo!</h1><p class=\\\"lead\\\"><img src=\\\"assets/images/yeoman.png\\\" alt=\\\"I\\'m Yeoman\\\"><br>Always a pleasure scaffolding your apps.</p><md-button class=\\\"md-raised animated infinite\\\" ng-class=\\\"main.classAnimation\\\" ng-click=\\\"main.showToastr()\\\">Splendid Toastr</md-button><p>With ♥ thanks to the contributions of<acme-malarkey extra-values=\\\"[\\'Yeoman\\', \\'Gulp\\', \\'Angular\\']\\\"></acme-malarkey></p></section><div class=\\\"techs\\\" layout-align=\\\"center\\\"><md-card ng-repeat=\\\"awesomeThing in main.awesomeThings | orderBy:\\'rank\\'\\\"><md-card-content><img class=\\\"pull-right\\\" ng-src=\\\"assets/images/{{ awesomeThing.logo }}\\\" alt=\\\"{{ awesomeThing.title }}\\\"><h3 class=\\\"md-title\\\">{{ awesomeThing.title }}</h3><p>{{ awesomeThing.description }}</p></md-card-content><div class=\\\"md-action-buttons\\\"><md-button ng-href=\\\"{{ awesomeThing.url }}\\\">Website</md-button></div></md-card></div></md-content></div>\");\n$templateCache.put(\"app/main/main.html\",\"<div ng-class=\\\"containerClass\\\" class=\\\"container main\\\"><h1>{{tag}}</h1><searchbar></searchbar><md-grid-list md-cols-sm=\\\"12\\\" md-cols-md=\\\"24\\\" md-cols-lg=\\\"48\\\" md-cols-gt-lg=\\\"60\\\" md-row-height=\\\"1:1\\\" md-gutter=\\\"5px\\\"><md-grid-tile ng-repeat=\\\"(n, image) in view.images\\\" md-colspan=\\\"{{aspect(image,0)}}\\\" md-rowspan=\\\"{{aspect(image,1)}}\\\"><div class=\\\"img-container\\\"><a href=\\\"#/slide/{{n}}\\\" open-slide=\\\"{{n}}\\\"><img src=\\\"{{image.derivative[0].uri}}\\\" class=\\\"img-responsive\\\"></a></div></md-grid-tile></md-grid-list><footer class=\\\"footer\\\"><div class=\\\"container\\\"><p>homemademess.com | <a href=\\\"https://github.com/markisatacomputer/homemademess\\\">github</a></p></div></footer></div>\");\n$templateCache.put(\"app/components/searchbar/searchbar.html\",\"<div ng-class=\\\"{home: isActive(\\'/\\')}\\\" class=\\\"navvy\\\"><div id=\\\"search\\\"><tags-input ng-model=\\\"tags\\\" template=\\\"tag-temp.html\\\" title=\\\"Tags\\\" placeholder=\\\"search by tag\\\" replace-spaces-with-dashes=\\\"false\\\" on-tag-added=\\\"redoSearch()\\\" on-tag-removed=\\\"redoSearch()\\\" ng-show=\\\"isActive(\\'/\\')\\\"><auto-complete source=\\\"findTags($query)\\\" min-length=\\\"1\\\"></auto-complete></tags-input><script type=\\\"text/ng-template\\\" id=\\\"tag-temp.html\\\"><span><a ng-bind=\\\"$getDisplayText()\\\" ui-sref=\\\"tagged({ tag : \\'{{ data[\\'text\\'] | taglink }}\\' })\\\"></a></span><a ng-click=\\\"$removeTag()\\\" ng-bind=\\\"::$$removeTagSymbol\\\" class=\\\"remove-button\\\"></a></script></div></div>\");}]);"],"sourceRoot":"/source/"}